[Unit]
Description=Zigbee2MQTT
Wants=mosquitto.container
Requires=mosquitto.container

[Container]
Image=ghcr.io/koenkk/zigbee2mqtt:latest
ContainerName=z2m

AddDevice=/dev/ttyUSB0:/dev/ttyUSB0
AutoUpdate=registry
GroupAdd=keep-groups
Network=mqtt.network
Network=internet.network
Volume=/etc/localtime:/etc/localtime:ro
Volume=/run/udev:/run/udev:ro
Volume=z2m-data.volume:/app/data:z
Volume=./z2m/configuration.yaml:/app/data/configuration.yaml:ro,Z

[Service]
Restart=on-failure
TimeoutStartSec=900

[Install]
WantedBy=default.target
